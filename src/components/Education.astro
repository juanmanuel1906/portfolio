---
/* components/Education.astro */
const EDUCATION = [
    {
        title: "IngenierÃ­a de Software",
        institution: "PolitÃ©cnico Grancolombiano",
        date: "2023 â€” 2026",
        description:
            "Enfoque en el ciclo de vida del desarrollo de software, diseÃ±o de arquitecturas escalables y optimizaciÃ³n de sistemas de alto rendimiento.",
        color: "blue",
        current: true,
    },
    {
        title: "DiseÃ±o de la InteracciÃ³n UI - UX",
        institution: "Universidad del QuindÃ­o",
        date: "Nov. 2024",
        description:
            "Diplomado centrado en la creaciÃ³n de interfaces intuitivas y experiencias de usuario optimizadas, aplicando principios de usabilidad, prototipado y diseÃ±o centrado en el humano.",
        color: "blue",
        current: false,
    },
    {
        title: "Desarrollo Web y MÃ³vil | Fullstack",
        institution: "IBM",
        date: "Jun. 2024",
        description:
            "FormaciÃ³n integral en tecnologÃ­as de punta para el desarrollo Frontend y Backend, integrando servicios en la nube y metodologÃ­as Ã¡giles para despliegues robustos.",
        color: "blue",
        current: false,
    },
    {
        title: "ADSI - TecnÃ³logo de Sistemas",
        institution: "SENA",
        date: "2020 â€” 2022",
        description:
            "Bases sÃ³lidas en lÃ³gica de programaciÃ³n, diseÃ±o de algoritmos y administraciÃ³n eficiente de bases de datos, con Ã©nfasis en el anÃ¡lisis y desarrollo de sistemas de informaciÃ³n.",
        color: "amber",
        current: false,
    },
    {
        title: "Pregrado en Idiomas",
        institution: "ZION International University",
        date: "2018 â€” 2022",
        description:
            "FormaciÃ³n profesional en lenguas extranjeras con Ã©nfasis en InglÃ©s e Italiano.",
        color: "emerald",
        current: false,
    },
];
---

<div class="relative max-w-4xl mx-auto py-12 px-4" id="education-container">
  <div class="absolute left-1/2 -translate-x-1/2 top-0 h-full w-1 bg-gray-200 dark:bg-gray-800 hidden md:block">
    <div id="progress-line" class="w-full bg-blue-500 origin-top scale-y-0 h-full shadow-[0_0_15px_#3b82f6]"></div>
  </div>

  <div class="space-y-12">
    {EDUCATION.map((item, index) => (
      <div class={`edu-item flex flex-col md:flex-row items-center gap-8 ${index % 2 !== 0 ? "md:flex-row-reverse" : ""}`}>
        
        <div class="w-full md:w-1/2">
          <div class="p-6 rounded-3xl border backdrop-blur-md transition-all duration-500 border-gray-200 dark:border-white/10 bg-white/40 dark:bg-white/5 hover:shadow-2xl hover:scale-[1.02] group">
            
            <div class="flex items-center justify-between mb-4">
              <div class="md:hidden size-10 rounded-full bg-gray-900 border-2 border-blue-500 flex items-center justify-center text-lg shadow-lg">
                {index === 0 ? "ğŸš€" : index === 1 ? "ğŸ’»" : index === 2 ? "ğŸŒ" : "ğŸ“œ"}
              </div>

              <span class={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest bg-blue-500/10 text-blue-500 border border-blue-500/20`}>
                {item.date}
              </span>
            </div>

            <h3 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-500 transition-colors">
              {item.title}
            </h3>
            <p class="text-blue-600 dark:text-blue-400 font-semibold mb-4 text-sm">
              {item.institution}
            </p>
            <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">
              {item.description}
            </p>
          </div>
        </div>

        <div class="hidden md:flex relative z-10 items-center justify-center">
          <div class="relative size-12 rounded-full bg-gray-900 border-4 border-blue-500 flex items-center justify-center shadow-[0_0_20px_#3b82f6] text-xl">
            {index === 0 ? "ğŸš€" : index === 1 ? "ğŸ’»" : index === 2 ? "ğŸŒ" : "ğŸ“œ"}
            
            {item.current && (
              <span class="absolute -top-1 -right-1 flex h-4 w-4">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75" />
                <span class="relative inline-flex rounded-full h-4 w-4 bg-blue-600 border-2 border-white dark:border-gray-900" />
              </span>
            )}
          </div>
        </div>

        <div class="hidden md:block md:w-1/2" />
      </div>
    ))}
  </div>
</div>
<style is:global>
  .edu-item {
    will-change: transform, opacity;
  }
</style>
<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  function initEducation() {
    const container = document.querySelector("#education-container");
    if (!container) return;

    const mm = gsap.matchMedia();

    // --- CONFIGURACIÃ“N PARA ESCRITORIO (Innovadora e Interactiva) ---
    mm.add("(min-width: 768px)", () => {
      // AnimaciÃ³n de la lÃ­nea de progreso
      gsap.to("#progress-line", {
        scaleY: 1,
        ease: "none",
        scrollTrigger: {
          trigger: container,
          start: "top 50%",
          end: "bottom 50%",
          scrub: 0.5,
        },
      });

      // Revelado asimÃ©trico (Fly-in lateral)
      gsap.utils.toArray(".edu-item").forEach((item: any, i) => {
        const isEven = i % 2 === 0;
        gsap.fromTo(item, 
          { opacity: 0, x: isEven ? -100 : 100, filter: "blur(10px)" },
          {
            opacity: 1,
            x: 0,
            filter: "blur(0px)",
            duration: 1,
            scrollTrigger: {
              trigger: item,
              start: "top 85%",
              toggleActions: "play none none reverse",
            },
          }
        );
      });
    });

    // --- CONFIGURACIÃ“N PARA MÃ“VIL (Simple y Estable como Proyectos) ---
    mm.add("(max-width: 767px)", () => {
      gsap.utils.toArray(".edu-item").forEach((item: any) => {
        gsap.fromTo(item,
          { opacity: 0, y: 30, scale: 0.95 }, // AnimaciÃ³n simple vertical
          {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 0.8,
            ease: "power2.out",
            scrollTrigger: {
              trigger: item,
              start: "top 90%",
              toggleActions: "play none none reverse",
            },
          }
        );
      });
    });

    ScrollTrigger.refresh();
  }

  // EjecuciÃ³n con prioridad baja para no bloquear el Avatar
  document.addEventListener("astro:page-load", () => {
    setTimeout(initEducation, 200);
  });
</script>